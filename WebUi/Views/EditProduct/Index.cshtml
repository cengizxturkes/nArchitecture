@using Domain.Entities;

@{
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}

<div class="app-content main-content" style="background-color:white">
    <div class="side-app main-container">
        <div data-v-0d352060="" class="card-body">
            <!----><!---->
            <div data-v-0d352060="" class="row">
                <div data-v-0d352060="" class="col-md-8">
                    <table data-v-0d352060="" class="table table-borderless">
                        <thead data-v-0d352060="" class="table-light">
                            <tr data-v-0d352060="">
                                <th data-v-0d352060="" scope="col">SERVICES</th>
                                <th data-v-0d352060="" scope="col" style="text-align: right;">COSTS</th>
                            </tr>
                            <tr>
                            </tr>
                        </thead>
                        <tbody data-v-0d352060="" class="tablebodydisc">

                            @*<tr data-v-0d352060="">
                            <th data-v-0d352060="" scope="row">FNSKU Labeling</th>

                            <td data-v-0d352060="" style="text-align: right;">0.30$</td>
                            @foreach (var item in (List<Product>)ViewBag.SelectedProductList)
                            {

                            <td class="material-switch pull-right">

                            <input id="fnsku" name="someSwitchOption001" class="someSwitchOption" type="checkbox"/>

                            <label for="fnsku" class="label-success"></label>
                            </td>

                            <script>
                            document.getElementById("fnsku").addEventListener("change",function(){
                            if (this.checked) {
                            alert("açık");
                            //document.getElementById("priceFnsku").style.display="inline";
                            $.ajax({
                            async:true,
                            data: {  id: @item.Id,fnsku:1},
                            type: "POST",
                            dataType: 'json',
                            url: "/EditProduct/Index/",
                            beforeSend: function () {
                            },
                            success: function (data) {
                            if (data.success) {
                            console.log(data);
                            } else {

                            }
                            }
                            });
                            }
                            });



                            //$("#cengiz").click(function(){

                            //             $.ajax({
                            //                 type: "POST",
                            //                 dataType: 'json',
                            //                 url: "/EditProduct/Edit/",
                            //                 beforeSend: function () {
                            //                 },
                            //                 success: function (data) {
                            //                     if (data.success) {
                            //                         console.log(data);
                            //                     } else {

                            //                     }
                            //                 }
                            //             });

                            //});

                            </script>

                            }
                            </tr>*@
                            @*    <tr data-v-0d352060="">
                            <th data-v-0d352060="" scope="row">Box Labeling</th>
                            <td data-v-0d352060="" style="text-align: right;">$ 3</td>
                            <td class="material-switch pull-right">

                            <input id="boxlabeling" name="someSwitchOption001" class="someSwitchOption" type="checkbox" />

                            <label for="boxlabeling" class="label-success"></label>
                            <script>
                            document.getElementById("boxlabeling").addEventListener("change", function () {
                            if (this.checked) {
                            alert("açık");
                            //document.getElementById("priceFnsku").style.display="inline";
                            $.ajax({
                            async: true,
                            data: { boxlabeling: 1 },
                            type: "POST",
                            dataType: 'json',
                            url: "/EditProduct/Index/",
                            beforeSend: function () {
                            },
                            success: function (data) {
                            if (data.success) {
                            console.log(data);
                            } else {

                            }
                            }
                            });
                            }
                            });




                            </script>
                            </td>

                            </tr>*@
                            @* <tr data-v-0d352060="">
                            <th data-v-0d352060="" scope="row">Delivering to Carrier</th>
                            <td data-v-0d352060="" style="text-align: right;">$ 2</td>
                            </tr>*@
                           @* <tr data-v-0d352060="">
                                <th data-v-0d352060="" scope="row">Label Disassembly</th>
                                <td data-v-0d352060="" style="text-align: right;">Free</td>

                            </tr>
                            <tr data-v-0d352060="">
                                <th data-v-0d352060="" scope="row">Additional Labeling</th>
                                <td data-v-0d352060="" style="text-align: right;">0.25</td>
                                <td class="material-switch pull-right">

                                    <input id="AdditionalLabeling" name="someSwitchOption001" class="someSwitchOption" type="checkbox" />

                                    <label for="AdditionalLabeling" class="label-success"></label>
                                    <script>
                                        document.getElementById("AdditionalLabeling").addEventListener("change", function () {
                                            if (this.checked) {
                                                alert("açık");
                                                //document.getElementById("priceFnsku").style.display="inline";
                                                $.ajax({
                                                    async: true,
                                                    data: { AdditionalLabeling: 1 },
                                                    type: "POST",
                                                    dataType: 'json',
                                                    url: "/EditProduct/EditFnsku/",
                                                    beforeSend: function () {
                                                    },
                                                    success: function (data) {
                                                        if (data.success) {
                                                            console.log(data);
                                                        } else {

                                                        }
                                                    }
                                                });
                                            }
                                        });




                                    </script>
                                </td>
                            </tr>
*@
                            @*<tr data-v-0d352060="">
                                <th data-v-0d352060="" scope="row">Poly Bagging</th>
                                <td data-v-0d352060="" style="text-align: right;">$ 0.00</td>




                            </tr>
                            <tr data-v-0d352060="">
                                <th data-v-0d352060="" scope="row">Bundle</th>
                                <td data-v-0d352060="" style="text-align: right;">$ 0.00</td>
*@




                                @*<tr data-v-0d352060="">
                                <th data-v-0d352060="" scope="row">Expected Total Cost</th>
                                <td data-v-0d352060="" style="text-align: right;">@ViewBag.ExpectedTotalCost </td>
                                </tr>*@
                            </tr>


                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
    <div data-v-0d352060="" class="card">
        <!----><!---->
        <div data-v-0d352060="" class="card-header">
            <div data-v-0d352060="">
                <h4 data-v-0d352060="" class="card-title"></h4> <!---->
            </div> <i data-v-0d352060="" aria-expanded="true" aria-controls="8"
                      class="code-toggler feather icon-code cursor-pointer"></i>
        </div>
        <div data-v-0d352060="" class="card-body">
            <!----><!---->
            <div data-v-0d352060="" class="row">
                <div data-v-0d352060="" class="col-md-12">
                    <h3 data-v-0d352060="" style="text-align: center; font-size: 20px; bottom: 30px;">
                        Düzenlenilen Ürün
                    </h3>
                </div>

            </div> <br data-v-0d352060=""> <!---->

            <div data-v-0d352060="">
                <div class="table-responsive" data-v-0d352060="">
                    <table role="table" aria-busy="false" aria-colcount="10"
                           class="table b-table table-striped" id="__BVID__179">
                        <!----><!---->
                        <thead role="rowgroup" class="">
                            <!---->
                            <tr role="row" class="">
                                <th role="columnheader" scope="col" aria-colindex="1" class="">
                                    <div>#</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="2" class="">
                                    <div>Id</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="2" class="">
                                    <div>Asin</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="3" class="">
                                    <div>Product Name</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="4" class="">
                                    <div>Location</div>
                                </th>

                                <th role="columnheader" scope="col" aria-colindex="6" class="">
                                    <div>Price</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="7" class="">
                                    <div>A Weight</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="8" class="">
                                    <div>Height</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="9" class="">
                                    <div>Quantity</div>
                                </th>
                                <th role="columnheader" scope="col" aria-colindex="10" class="">
                                    <div>Actions</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody role="rowgroup">
                            <!---->
                            <tr role="row" class="">


                                @foreach (var item in (List<Product>)ViewBag.SelectedProductList)
                                {


                                <tr>
                                    <td>

                                            @*<script>
                                    $("#@item.Id").click(function(){


                                    });



                                    </script>*@

                                    </td>
                                    <td aria-colindex="2" role="cell" class="">@item.Id</td>
                                    <td aria-colindex="2" role="cell" class="">@item.AsinCode</td>
                                    <td aria-colindex="3" role="cell" class="">@item.Name</td>
                                    <td aria-colindex="4" role="cell" class="">USA</td>
                                    <td aria-colindex="6" role="cell" class="">@item.TotalPrice</td>
                                    <td aria-colindex="7" role="cell" class="">@item.Weight</td>
                                    <td aria-colindex="8" role="cell" class="">@item.Height</td>
                                    <td aria-colindex="9" role="cell" class="">@item.ExpectedStockAmount</td>
                                    <td aria-colindex="10" role="cell" class=""></td>
                                </tr>
                                }


                            <!----><!---->
                        </tbody><!---->
                    </table>
                </div>
            </div>
            <div data-v-0d352060="" id="8" class="card-code collapse" style="display: none;">
                <div data-v-0d352060="" class="p-1"></div>
                <pre data-v-0d352060=""
                     class=" language-markup"><code data-v-0d352060="" class=" language-markup"></code></pre>
            </div>
        </div><!----><!---->
    </div>
    <div data-v-0d352060="" class="row mt-1" style="text-align: right;">
        <div data-v-0d352060="" class="col-md-6"></div>
       

            @*
            <form asp-action="EditFnsku" asp-controller="EditProduct">
            <button type="submit" class="btn btn-success">
            Gönderiyi Tamamla
            </button>
            </form><br data-v-0d352060=""><br data-v-0d352060=""> <!---->*@
          <form asp-action="Index" asp-controller="Inventory">
            <button class="btn btn-success" onclick="updateProduct()">
                Gönderiyi Tamamla
                </button>
            </form>
        </div>
    </div>
    <div data-v-0d352060="" id="2" class="card-code collapse" style="display: none;">
        <div data-v-0d352060="" class="p-1"></div>
        <pre data-v-0d352060=""
             class="language-markup"><code data-v-0d352060="" class="language-markup"></code></pre>
    </div>
</div>
<script>
    function updateProduct() {
        var discChecs = $(".disccheck");
        var data = { "ProductID": @ViewBag.ProductID};
        data.Discs = [];
        for (var k = 0; k < discChecs.length; k++) {

            var item = $(discChecs[k]);

            if (item.is(':checked')) {
                data.Discs.push({
                    "added": true,
                    "DiscountID": parseInt(item.data("discid"))
                });

            }

        }
        $.ajax({
            type: 'POST',
            url: 'http://localhost:5147/api/Product/updateDisc',
            data: JSON.stringify(data),
            success: function (data) {
                //location.reload();
            },
            contentType: "application/json",
            dataType: 'json'
        });

    }
    document.addEventListener("DOMContentLoaded", function () {
        var tablebodydisc = $(".tablebodydisc");

        $.ajax({
            async: true,
            data: { AdditionalLabeling: 1 },
            type: "GET",
            dataType: 'json',
            url: "http://localhost:5147/api/Product/getdisc?ProductID=" + @ViewBag.ProductID,
            beforeSend: function () {
            },
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                    var item = data[i];
                    console.log(item);
                    var htmls = `<tr>
                                                                              <th data-v-0d352060="" scope="row">`+ item.discount.name + `</th>

                                                                                        <td data-v-0d352060="" style="text-align: right;">`+ ((item.discount.multiplier ? '$':'$') + item.discount.disc).replace("1.", "0.") + `</td>
                                                                                <td class="material-switch pull-right">

                                                                                                    <input `+ (item.added ? 'checked' : '') + ` id="disc` + item.discount.id + `" name="disc` + item.discount.id + ` " class="someSwitchOption disccheck" data-discid="` + item.discount.id + ` " type="checkbox"/>

                                                                                    <label for="disc`+ item.discount.id + `" class="label-success"></label>
                                                                                    </td></tr>`;

                    tablebodydisc.prepend(htmls);
                }

            }
        });

    });
    
    
</script>


